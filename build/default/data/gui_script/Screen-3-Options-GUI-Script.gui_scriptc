
Í–
¨Vfunction init(self)
	msg.post(".", "acquire_input_focus")
	msg.post("#", "show_level_select")
	self.active = false
			
	if (sysinfo.system_name ~= "Android" and sysinfo.system_name ~= "iOS") then
		gui.set_adjust_mode( gui.get_node("SelectorLine"), gui.ADJUST_FIT )
		gui.set_adjust_mode( gui.get_node("SelectorLeft"), gui.ADJUST_FIT )
		gui.set_adjust_mode( gui.get_node("SelectorLeft1"), gui.ADJUST_FIT )
		gui.set_adjust_mode( gui.get_node("SelectorLeft2"), gui.ADJUST_FIT )
		gui.set_adjust_mode( gui.get_node("SelectorRight"), gui.ADJUST_FIT )
		gui.set_adjust_mode( gui.get_node("SelectorRight1"), gui.ADJUST_FIT )
		gui.set_adjust_mode( gui.get_node("SelectorRight2"), gui.ADJUST_FIT )
				
		gui.set_adjust_mode( gui.get_node("ButtonSelectorLeft"), gui.ADJUST_FIT )
		gui.set_adjust_mode( gui.get_node("ButtonSelectorRight"), gui.ADJUST_FIT )	
		gui.set_adjust_mode( gui.get_node("ButtonBack"), gui.ADJUST_FIT )
	end

	local node = gui.get_node("SelectorLine")
	if (ArrowsSelectedByKeyboard == 0) then
		gui.set_position( node, vmath.vector3(180, 560, 1) )
	elseif (ArrowsSelectedByKeyboard == 1) then
		gui.set_position( node, vmath.vector3(180, 510, 1) )
	elseif (ArrowsSelectedByKeyboard == 2) then
		gui.set_position( node, vmath.vector3(180, 430, 1) )
	end
	
	if (MusicVolume == 1.0) then
		label.set_text("#OptionsMusicVolume", "100%")
	elseif (MusicVolume == 0.75) then
		label.set_text("#OptionsMusicVolume", "75%")
	elseif (MusicVolume == 0.5) then
		label.set_text("#OptionsMusicVolume", "50%")
	elseif (MusicVolume == 0.25) then
		label.set_text("#OptionsMusicVolume", "25%")
	elseif (MusicVolume == 0.0) then
		label.set_text("#OptionsMusicVolume", "0%")
	end	

	if (EffectsVolume == 1.0) then
		label.set_text("#OptionsEffectsVolume", "100%")
	elseif (EffectsVolume == 0.75) then
		label.set_text("#OptionsEffectsVolume", "75%")
	elseif (EffectsVolume == 0.5) then
		label.set_text("#OptionsEffectsVolume", "50%")
	elseif (EffectsVolume == 0.25) then
		label.set_text("#OptionsEffectsVolume", "25%")
	elseif (EffectsVolume == 0.0) then
		label.set_text("#OptionsEffectsVolume", "0%")
	end	
		
	if (GameMode == 2) then
		label.set_text("#OptionsGameMode", "Adult")
	elseif (GameMode == 1) then
		label.set_text("#OptionsGameMode", "Teen")
	elseif (GameMode == 0) then
		label.set_text("#OptionsGameMode", "Child")
	end
end

function on_message(self, message_id, message, sender)
	if message_id == hash("show_level_select") then
		msg.post("#", "enable")
		self.active = true
	elseif message_id == hash("hide_level_select") then
		msg.post("#", "disable")
		self.active = false
	end
end

function on_input(self, action_id, action)
	local node
	
	ArrowClicked = -1

	if action_id == hash("LEFT") then
		if (ArrowsSelectedByKeyboard == 0) then
			node = gui.get_node("SelectorLeft")
		elseif (ArrowsSelectedByKeyboard == 1) then
			node = gui.get_node("SelectorLeft1")
		elseif (ArrowsSelectedByKeyboard == 2) then
			node = gui.get_node("SelectorLeft2")
		end

		if (ScreenFadeAlpha == 0) then
			gui.set_scale( node, vmath.vector3(0.85, 0.85, 1) )

			msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})
			
			if (ArrowsSelectedByKeyboard == 0) then
				if (MusicVolume > 0) then
					MusicVolume = (MusicVolume - 0.25)
				else
					MusicVolume = 1
				end
				sound.set_group_gain("music", MusicVolume)
				msg.post("Audio#Title-BGM", "play_sound", {delay = 0, gain = MusicVolume})
			elseif (ArrowsSelectedByKeyboard == 1) then
				if (EffectsVolume > 0) then
					EffectsVolume = (EffectsVolume - 0.25)
				else
					EffectsVolume = 1
				end
				sound.set_group_gain("effects", EffectsVolume)
				msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})
			elseif (ArrowsSelectedByKeyboard == 2) then
				if (GameMode > 0) then
					GameMode = (GameMode - 1)
				else
					GameMode = 2
				end
			end
								
			NextScreen = 3
			ScreenFadeStatus = 1

			ArrowClicked = node
		end
	end

	if action_id == hash("RIGHT") then
		if (ArrowsSelectedByKeyboard == 0) then
			node = gui.get_node("SelectorRight")
		elseif (ArrowsSelectedByKeyboard == 1) then
			node = gui.get_node("SelectorRight1")
		elseif (ArrowsSelectedByKeyboard == 2) then
			node = gui.get_node("SelectorRight2")
		end
		
		if (ScreenFadeAlpha == 0) then
			gui.set_scale( node, vmath.vector3(0.85, 0.85, 1) )

			msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})
			
			if (ArrowsSelectedByKeyboard == 0) then
				if (MusicVolume < 1) then
					MusicVolume = (MusicVolume + 0.25)
				else
					MusicVolume = 0
				end
				msg.post("Audio#Title-BGM", "play_sound", {delay = 0, gain = MusicVolume})
				sound.set_group_gain("music", MusicVolume)
			elseif (ArrowsSelectedByKeyboard == 1) then
				if (EffectsVolume < 1) then
					EffectsVolume = (EffectsVolume + 0.25)
				else
					EffectsVolume = 0
				end
				sound.set_group_gain("effects", EffectsVolume)
				msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})
			elseif (ArrowsSelectedByKeyboard == 2) then
				if (GameMode < 2) then
					GameMode = (GameMode + 1)
				else
					GameMode = 0
				end
			end
			
			NextScreen = 3
			ScreenFadeStatus = 1

			ArrowClicked = node
		end
	end

	if ( DelayAllUserInput == 0 and action_id == hash("UP") ) then
		if (ArrowsSelectedByKeyboard > 0) then
			ArrowsSelectedByKeyboard = (ArrowsSelectedByKeyboard - 1)
		else
			ArrowsSelectedByKeyboard = 2
		end

		node = gui.get_node("SelectorLine")
		if (ArrowsSelectedByKeyboard == 0) then
			gui.set_position( node, vmath.vector3(180, 560, 1) )
		elseif (ArrowsSelectedByKeyboard == 1) then
			gui.set_position( node, vmath.vector3(180, 510, 1) )
		elseif (ArrowsSelectedByKeyboard == 2) then
			gui.set_position( node, vmath.vector3(180, 430, 1) )
		end

		msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})			
					
		DelayAllUserInput = 15
	end

	if ( DelayAllUserInput == 0 and action_id == hash("DOWN") ) then
		if (ArrowsSelectedByKeyboard < 2) then
			ArrowsSelectedByKeyboard = (ArrowsSelectedByKeyboard + 1)
		else
			ArrowsSelectedByKeyboard = 0
		end

		node = gui.get_node("SelectorLine")
		if (ArrowsSelectedByKeyboard == 0) then
			gui.set_position( node, vmath.vector3(180, 560, 1) )
		elseif (ArrowsSelectedByKeyboard == 1) then
			gui.set_position( node, vmath.vector3(180, 510, 1) )
		elseif (ArrowsSelectedByKeyboard == 2) then
			gui.set_position( node, vmath.vector3(180, 430, 1) )
		end

		msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})
		
		DelayAllUserInput = 15
	end

	ButtonClicked = -1
	
	if action_id == hash("EnterGUI") then
		if (ButtonSelectedByKeyboard == 0) then
			node = gui.get_node("ButtonBack")
		end

		if (ScreenFadeAlpha == 0) then
			gui.set_scale( node, vmath.vector3(0.85, 0.85, 1) )

			msg.post("Audio#MenuClick", "play_sound", {delay = 0, gain = EffectsVolume})
							
			NextScreen = 2

			ScreenFadeStatus = 1

			ButtonClicked = node
			ScreenFadeAlphaHalf = 0.5
		end
	end
				
	if action_id == hash("ClickGUI") then
		local nodeSelectorLine
		
		for index = 0, 2 do
			if (index == 0) then
				node = gui.get_node("SelectorLeft")
			elseif (index == 1) then
				node = gui.get_node("SelectorLeft1")
			elseif (index == 2) then
				node = gui.get_node("SelectorLeft2")
			end
			if gui.pick_node(node, action.x, action.y) then
				if (ScreenFadeAlpha == 0) then
					gui.set_scale( node, vmath.vector3(0.85, 0.85, 1) )

					msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})

					ArrowsSelectedByKeyboard = index
					
					if (ArrowsSelectedByKeyboard == 0) then
						if (MusicVolume > 0) then
							MusicVolume = (MusicVolume - 0.25)
						else
							MusicVolume = 1
						end
						msg.post("Audio#Title-BGM", "play_sound", {delay = 0, gain = MusicVolume})
						sound.set_group_gain("music", MusicVolume)
					elseif (ArrowsSelectedByKeyboard == 1) then
						if (EffectsVolume > 0) then
							EffectsVolume = (EffectsVolume - 0.25)
						else
							EffectsVolume = 1
						end
						sound.set_group_gain("effects", EffectsVolume)
						msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})
					elseif (ArrowsSelectedByKeyboard == 2) then
						if (GameMode > 0) then
							GameMode = (GameMode - 1)
						else
							GameMode = 2
						end
					end

					nodeSelectorLine = gui.get_node("SelectorLine")
					if (ArrowsSelectedByKeyboard == 0) then
						gui.set_position( nodeSelectorLine, vmath.vector3(180, 560, 1) )
					elseif (ArrowsSelectedByKeyboard == 1) then
						gui.set_position( nodeSelectorLine, vmath.vector3(180, 510, 1) )
					elseif (ArrowsSelectedByKeyboard == 2) then
						gui.set_position( nodeSelectorLine, vmath.vector3(180, 430, 1) )
					end
										
					NextScreen = 3
					ScreenFadeStatus = 1

					ArrowClicked = node
				end
			end
		end
				
		for index = 0, 2 do
			if (index == 0) then
				node = gui.get_node("SelectorRight")
			elseif (index == 1) then
				node = gui.get_node("SelectorRight1")
			elseif (index == 2) then
				node = gui.get_node("SelectorRight2")
			end
			if gui.pick_node(node, action.x, action.y) then
				if (ScreenFadeAlpha == 0) then
					gui.set_scale( node, vmath.vector3(0.85, 0.85, 1) )

					msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})

					ArrowsSelectedByKeyboard = index

					if (ArrowsSelectedByKeyboard == 0) then
						if (MusicVolume < 1) then
							MusicVolume = (MusicVolume + 0.25)
						else
							MusicVolume = 0
						end
						msg.post("Audio#Title-BGM", "play_sound", {delay = 0, gain = MusicVolume})
						sound.set_group_gain("music", MusicVolume)
					elseif (ArrowsSelectedByKeyboard == 1) then
						if (EffectsVolume < 1) then
							EffectsVolume = (EffectsVolume + 0.25)
						else
							EffectsVolume = 0
						end
						sound.set_group_gain("effects", EffectsVolume)
						msg.post("Audio#MenuMove", "play_sound", {delay = 0, gain = EffectsVolume})
					elseif (ArrowsSelectedByKeyboard == 2) then
						if (GameMode < 2) then
							GameMode = (GameMode + 1)
						else
							GameMode = 0
						end
					end

					nodeSelectorLine = gui.get_node("SelectorLine")
					if (ArrowsSelectedByKeyboard == 0) then
						gui.set_position( nodeSelectorLine, vmath.vector3(180, 560, 1) )
					elseif (ArrowsSelectedByKeyboard == 1) then
						gui.set_position( nodeSelectorLine, vmath.vector3(180, 510, 1) )
					elseif (ArrowsSelectedByKeyboard == 2) then
						gui.set_position( nodeSelectorLine, vmath.vector3(180, 430, 1) )
					end

					NextScreen = 3
					ScreenFadeStatus = 1

					ArrowClicked = node
				end
			end
		end
				
		node = gui.get_node("ButtonBack")
		if gui.pick_node(node, action.x, action.y) then
			if (ScreenFadeAlpha == 0) then
				gui.set_scale( node, vmath.vector3(0.85, 0.85, 1) )

				msg.post("Audio#MenuClick", "play_sound", {delay = 0, gain = EffectsVolume})
											
				NextScreen = 2
				ScreenFadeStatus = 1

				ButtonClicked = node
				ScreenFadeAlphaHalf = 0.5
			end
		end
	end
end6data/gui_script/Screen-3-Options-GUI-Script.gui_scriptç?LJ 7=data/gui_script/Screen-3-Options-GUI-Script.gui_scriptÔ  -Ÿ;4  7% % >4  7% % >) : 4 7	 T^€4 7
 TZ€4 74 7% >4 7>4 74 7% >4 7>4 74 7% >4 7>4 74 7% >4 7>4 74 7% >4 7>4 74 7% >4 7>4 74 7% >4 7>4 74 7% >4 7>4 74 7% >4 7>4 74 7% >4 7>4 7% >4 	  T€4 7 4 7'´ '0' > =T€4 	 T€4 7 4 7'´ 'ş' > =T€4 	 T
€4 7 4 7'´ '®' > =4 	 T€4 7%  %! >T#€4 	 T€4 7%  %" >T€4 	 T€4 7%  %# >T€4 	 T€4 7%  %$ >T€4 	  T€4 7%  %% >4& 	 T€4 7%' %! >T#€4& 	 T€4 7%' %" >T€4& 	 T€4 7%' %# >T€4& 	 T€4 7%' %$ >T€4& 	  T€4 7%' %% >4( 	 T€4 7%) %* >T€4( 	 T€4 7%) %+ >T€4( 	  T€4 7%) %, >G  
Child	Teen
Adult#OptionsGameModeGameMode#OptionsEffectsVolumeEffectsVolume0%25%50%75%	100%#OptionsMusicVolumeset_text
labelMusicVolumevector3
vmathset_positionArrowsSelectedByKeyboardButtonBackButtonSelectorRightButtonSelectorLeftSelectorRight2SelectorRight1SelectorRightSelectorLeft2SelectorLeft1SelectorLeftADJUST_FITSelectorLineget_nodeset_adjust_modeguiiOSAndroidsystem_namesysinfoactiveshow_level_select#acquire_input_focus.	postmsg €€ ÿ€€€ÿ€€Àş									








   !!!!!!"""######$$$%%%%%((())))))***++++++,,,------...//////0001111144455555566677777788899999;self  node sœ ş  	 B>4  % > T€4 7% % >) : T€4  % > T€4 7% % >) : G  disablehide_level_selectactiveenable#	postmsgshow_level_select	hashself  message_id  message  sender   ş-  ?ÊüH¢)  'ÿÿ5  4 % > Tw€4 	  T€4 7% > T€4 	 T€4 7% > T€4 	 T€4 7% > 4	 	  TZ€4 7
 4 7( ( '	 > =4 7% % 3 4 :>4 	  T€4 '   T€4 5 T€' 5 4 7% 4 >4 7% % 3 4 :>T(€4 	 T€4 '   T€4 5 T€' 5 4 7% 4 >4 7% % 3 4 :>T€4 	 T
€4 '   T€4 5 T€' 5 ' 5 ' 5 5  4 % > Tw€4 	  T€4 7%  > T€4 	 T€4 7%! > T€4 	 T€4 7%" > 4	 	  TZ€4 7
 4 7( ( '	 > =4 7% % 3# 4 :>4 	  T€4 '  T€4 5 T€'  5 4 7% % 3$ 4 :>4 7% 4 >T(€4 	 T€4 '  T€4 5 T€'  5 4 7% 4 >4 7% % 3% 4 :>T€4 	 T
€4 '  T€4 5 T€'  5 ' 5 ' 5 5  4& 	  TG€4 %' > TB€4 '   T€4 5 T€' 5 4 7%( > 4 	  T€4 7) 4 7'´ '0'	 > =T€4 	 T€4 7) 4 7'´ 'ş'	 > =T€4 	 T
€4 7) 4 7'´ '®'	 > =4 7% % 3* 4 :>' 5& 4& 	  TG€4 %+ > TB€4 '  T€4 5 T€'  5 4 7%( > 4 	  T€4 7) 4 7'´ '0'	 > =T€4 	 T€4 7) 4 7'´ 'ş'	 > =T€4 	 T
€4 7) 4 7'´ '®'	 > =4 7% % 3, 4 :>' 5& 'ÿÿ5- 4 %. > T$€4/ 	  T€4 7%0 > 4	 	  T€4 7
 4 7( ( '	 > =4 7%1 % 32 4 :>' 5 ' 5 5- ( 53 4 %4 > TŠ)  '  ' ' I¬€	  T	€4	 7		%
 >		 T	€	 T	€4	 7		%
 >		 T	€	 T	€4	 7		%
 >		 4	 7	5	
 7677>	 	 T
Œ€4		 		  T	‰€4	 7	
	
 4 7( ( ' > =	4	 7		%
 % 38 4 :>	5 4	 		  T	€4	 '
  
	 T	€4	 		5	 T	€'	 5	 4	 7		%
 % 39 4 :>	4	 7		%
 4 >	T	(€4	 		 T	€4	 '
  
	 T	€4	 		5	 T	€'	 5	 4	 7		%
 4 >	4	 7		%
 % 3: 4 :>	T	€4	 		 T	
€4	 '
  
	 T	€4	 		5	 T	€'	 5	 4	 7		%
( >		 4	 		  T	€4	 7	)	
 4 7'´ '0' > =	T	€4	 		 T	€4	 7	)	
 4 7'´ 'ş' > =	T	€4	 		 T	
€4	 7	)	
 4 7'´ '®' > =	'	 5	 '	 5	 5  KT'  ' ' I¬€	  T	€4	 7		%
  >		 T	€	 T	€4	 7		%
! >		 T	€	 T	€4	 7		%
" >		 4	 7	5	
 7677>	 	 T
Œ€4		 		  T	‰€4	 7	
	
 4 7( ( ' > =	4	 7		%
 % 3; 4 :>	5 4	 		  T	€4	 '
 	
 T	€4	 		5	 T	€'	  5	 4	 7		%
 % 3< 4 :>	4	 7		%
 4 >	T	(€4	 		 T	€4	 '
 	
 T	€4	 		5	 T	€'	  5	 4	 7		%
 4 >	4	 7		%
 % 3= 4 :>	T	€4	 		 T	
€4	 '
 	
 T	€4	 		5	 T	€'	  5	 4	 7		%
( >		 4	 		  T	€4	 7	)	
 4 7'´ '0' > =	T	€4	 		 T	€4	 7	)	
 4 7'´ 'ş' > =	T	€4	 		 T	
€4	 7	)	
 4 7'´ '®' > =	'	 5	 '	 5	 5  KT4 7%0 > 4 75 7677>  T€4	 	  T€4 7
 4 7( (	 '
 > =4 7%1 % 3> 4	 :	>' 5 ' 5 5- ( 53 G   
delay  
delay  
delay  
delay  
delay  
delay  
delay yxpick_nodeClickGUIScreenFadeAlphaHalf 
delay Audio#MenuClickButtonBackButtonSelectedByKeyboardEnterGUIButtonClicked 
delay 	DOWN 
delay set_positionSelectorLineUPDelayAllUserInput 
delay  
delay  
delay SelectorRight2SelectorRight1SelectorRight
RIGHTScreenFadeStatusNextScreenGameMode 
delay effects 
delay Audio#Title-BGM
musicset_group_gain
soundMusicVolume	gainEffectsVolume 
delay play_soundAudio#MenuMove	postmsgvector3
vmathset_scaleScreenFadeAlphaSelectorLeft2SelectorLeft1SelectorLeftget_nodeguiArrowsSelectedByKeyboard	LEFT	hashArrowClicked çÌ™³³æ¬ÿ€€Àş€€€ÿ                    	 	 	 	 	 	 
 
 
                                                                   ! ! ! ! ! " " " " " " " " " # # # $ $ $ $ % % % % ' ' + + , , . 2 2 2 2 2 3 3 3 4 4 4 4 4 4 5 5 5 6 6 6 6 6 6 7 7 7 8 8 8 8 8 ; ; ; < < < < < < < < < < > > > > > > > > @ @ @ A A A A B B B B D D F F F F F F F F G G G G G G H H H I I I I J J J J L L N N N N N O O O O O O O O O P P P Q Q Q Q R R R R T T X X Y Y [ _ _ _ _ _ _ _ _ ` ` ` ` a a a a c c f f f f f g g g h h h h h h h h h h h i i i j j j j j j j j j j j k k k l l l l l l l l l l o o o o o o o o q q t t t t t t t t u u u u v v v v x x { { { { { | | | } } } } } } } } } } } ~ ~ ~            € € €           „ „ „ „ „ „ „ „ † † ‰ ‰ ‹ ‹ ‹ ‹ ‹ Œ Œ Œ         ‘ ‘ ‘ ‘ ‘ ‘ ‘ ‘ ‘ ‘ “ “ “ “ “ “ “ “ • • — — ™ š š      Ÿ ¡ ¡ ¡ ¡ ¢ ¢ £ £ £ £ £ £ ¤ ¤ ¥ ¥ ¥ ¥ ¥ ¥ ¦ ¦ § § § § § © © © © © © © © ª ª ª « « « « « « « « « « ­ ­ ­ ­ ­ ­ ­ ­ ¯ ± ± ± ² ² ² ² ³ ³ ³ ³ µ µ · · · · · · · · ¸ ¸ ¸ ¸ ¸ ¸ ¹ ¹ ¹ º º º º » » » » ½ ½ ¿ ¿ ¿ ¿ ¿ À À À À À À À À À Á Á Á Â Â Â Â Ã Ã Ã Ã Å Å É É É É É Ê Ê Ê Ë Ë Ë Ë Ë Ë Ë Ë Ë Ë Ë Ì Ì Ì Í Í Í Í Í Í Í Í Í Í Í Î Î Î Ï Ï Ï Ï Ï Ï Ï Ï Ï Ï Ò Ò Ó Ó Õ ¡ Ú Ú Ú Ú Û Û Ü Ü Ü Ü Ü Ü İ İ Ş Ş Ş Ş Ş Ş ß ß à à à à à â â â â â â â â ã ã ã ä ä ä ä ä ä ä ä ä ä æ æ æ æ æ æ æ æ è ê ê ê ë ë ë ë ì ì ì ì î î ğ ğ ğ ğ ğ ğ ğ ğ ñ ñ ñ ñ ñ ñ ò ò ò ó ó ó ó ô ô ô ô ö ö ø ø ø ø ø ù ù ù ù ù ù ù ù ù ú ú ú û û û û ü ü ü ü ş ş Ú "self  Ëaction_id  Ëaction  Ënode ÉnodeSelectorLine ¿‰­ ­ ­index «¯­ ­ ­index « R    ê1   5  1  5  1  5  G  on_input on_message 	init <  F > jH j  " 